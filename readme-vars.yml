---
# project information
project_name: immich
project_url: "https://immich.app/"
project_logo: "https://raw.githubusercontent.com/immich-app/immich/main/design/immich-logo-inline-dark.png"
project_blurb: "Immich is a high performance self-hosted photo and video backup solution."
project_github_repo_url: "https://github.com/imagegenius/docker-{{ project_name }}"
project_blurb_optional_extras_enabled: false

# supported architectures
available_architectures:
  - { arch: "{{ arch_x86_64 }}", tag: "amd64-latest" }
  - { arch: "{{ arch_arm64 }}", tag: "arm64v8-latest" }

# development version
development_versions: true
development_versions_items:
  - { tag: "latest", desc: "Latest Immich release." }
  - { tag: "noml", desc: "Latest Immich release. Machine-learning is completely removed." }
  - { tag: "cuda", desc: "Latest Immich release. Machine-learning supports cuda (Nvidia)." }
  - { tag: "openvino", desc: "Latest Immich release. Machine-learning supports openvino (Intel)." }

# container parameters
common_param_env_vars_enabled: true
param_container_name: "{{ project_name }}"
param_usage_include_net: false
param_usage_include_env: true
param_env_vars:
  - { env_var: "DB_HOSTNAME", env_value: "192.168.1.x", desc: "PostgreSQL Host" }
  - { env_var: "DB_USERNAME", env_value: "postgres", desc: "PostgreSQL Username" }
  - { env_var: "DB_PASSWORD", env_value: "postgres", desc: "PostgreSQL Password" }
  - { env_var: "DB_DATABASE_NAME", env_value: "immich", desc: "PostgreSQL Database Name" }
  - { env_var: "REDIS_HOSTNAME", env_value: "192.168.1.x", desc: "Valkey/Redis Hostname" }
param_usage_include_vols: true
param_volumes:
  - { vol_path: "/config", vol_host_path: "path_to_appdata", desc: "AppData" }
  - { vol_path: "/photos", vol_host_path: "path_to_photos", desc: "Contains all the photos uploaded to Immich" }
param_usage_include_ports: true
param_ports:
  - { external_port: "8080", internal_port: "8080", port_desc: "WebUI Port" }
param_device_map: false
cap_add_param: false

# optional container parameters
opt_param_usage_include_env: true
opt_param_env_vars:
  - { env_var: "DB_PORT", env_value: "5432", desc: "PostgreSQL Port" }
  - { env_var: "REDIS_PORT", env_value: "6379", desc: "Valkey/Redis Port" }
  - { env_var: "REDIS_PASSWORD", env_value: "", desc: "Valkey/Redis password" }
opt_param_usage_include_vols: true
opt_param_volumes:
  - { vol_path: "/libraries", vol_host_path: "path_to_libraries", desc: "External libraries to track assets stored outside of Immich" }
opt_param_usage_include_ports: false
opt_param_device_map: false
opt_cap_add_param: false
optional_block_1: false

# unraid template
unraid_requirement: "PostgreSQL 14/15/16/17 with [vectorchord](https://github.com/tensorchord/VectorChord), Valkey/Redis"
unraid_category: "Backup: Cloud: MediaApp:Photos"

# application setup block
app_setup_block_enabled: true
app_setup_block: |
  See [main branch](https://github.com/imagegenius/docker-immich#application-setup) for setup instructions.

external_application_snippet_enabled: true
external_application_cli_block: |
  # By default, ports for the databases are opened, be careful when deploying it
  # Valkey/Redis:
  docker run -d \
    --name=valkey \
    -p 6379:6379 \
    valkey/valkey:8-bookworm

  # PostgreSQL 14 with vectorchord:
  docker run -d \
    --name=postgres14 \
    -e POSTGRES_USER=postgres \
    -e POSTGRES_PASSWORD=postgres \
    -e POSTGRES_DB=immich \
    # Uncomment the DB_STORAGE_TYPE: 'HDD' var if your database isn't stored on SSDs
    # -e DB_STORAGE_TYPE: 'HDD' \
    -v path_to_postgres:/var/lib/postgresql/data \
    -p 5432:5432 \
    ghcr.io/immich-app/postgres:14-vectorchord0.3.0-pgvectors0.2.0
external_application_compose_block: |
  # By default, ports for the databases are opened, be careful when deploying it
  # Valkey/Redis:
    valkey:
      image: valkey/valkey:8-bookworm
      ports:
        - 6379:6379
      container_name: valkey
  # PostgreSQL 14:
    postgres14:
      image: ghcr.io/immich-app/postgres:14-vectorchord0.3.0-pgvectors0.2.0
      ports:
        - 5432:5432
      container_name: postgres14
      environment:
        POSTGRES_USER: postgres
        POSTGRES_PASSWORD: postgres
        POSTGRES_DB: immich
        # Uncomment the DB_STORAGE_TYPE: 'HDD' var if your database isn't stored on SSDs
        # DB_STORAGE_TYPE: 'HDD'
      volumes:
        - path_to_postgres:/var/lib/postgresql/data
external_application_unraid_block: |
  You can also use a docker mods to start redis within the container,
  Set `DOCKER_MODS=imagegenius/mods:universal-redis`, and `REDIS_HOSTNAME` to `localhost`.

# changelog
changelogs:
  - { date: "22.05.25:", desc: "change `pgvecto.rs` to `VectorChord`" }
  - { date: "23.12.23:", desc: "move to use seperate baseimage" }
  - { date: "13.11.23:", desc: "rebase noml to ubuntu" }
  - { date: "02.01.23:", desc: "Initial Release." }
