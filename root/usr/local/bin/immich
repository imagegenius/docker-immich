#!/usr/bin/with-contenv bash

if [[ $# -eq 0 ]]; then
    echo "Usage: immich [upload|reset-admin-password|enable-password-login|disable-password-login|list-users]"
    exit 1
fi

case $1 in
upload)
    node /app/cli/bin/index.js "$@"
    ;;
reset-admin-password | enable-password-login | disable-password-login | list-users)
    node /app/immich/server/dist/main cli "$@"
    ;;
help)
    shift
    case $1 in
    upload)
        node /app/cli/bin/index.js help
        ;;
    admin)
        node /app/immich/server/dist/main cli help
        ;;
    *)
        echo "Invalid command for help. Available commands are 'immich admin help' or 'immich upload help'"
        exit 1
        ;;
    esac
    ;;
*)
    echo "Invalid command. Please refer to the help: immich help [admin|upload]"
    exit 1
    ;;
esac
